<div class="flex flex-col md:flex-row items-center justify-center min-h-screen bg-cover bg-center" style="background-image: url('bg.png');">
  <!-- Form Container -->
  <div class="md:w-1/3 p-14 bg-white md:bg-opacity-90 rounded-lg shadow-lg md:ml-auto md:mr-16">
    <h2 class="text-2xl font-bold mb-6 text-center md:text-left">
      Connexion
    </h2>
    <form [formGroup]="loginForm" (ngSubmit)="onSubmit()">
      <div class="mb-4">
        <label class="block text-gray-700 font-bold mb-2" for="email">
          Email
          <span class="text-red-500">*</span>
        </label>
        <input
          formControlName="email"
          class="w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-600"
          id="email"
          placeholder="Entrez votre email"
          type="email"
        />
        <div *ngIf="loginForm.get('email')?.invalid && (loginForm.get('email')?.dirty || loginForm.get('email')?.touched)" class="text-red-500 text-sm mt-1">
          <div *ngIf="email?.errors?.['required']">L'email est requis.</div>
          <div *ngIf="email?.errors?.['email']">L'email n'est pas valide.</div>
        </div>
      </div>
      <div class="mb-6 relative">
        <label class="block text-gray-700 font-bold mb-2" for="motDePasse">
          Mot de Passe
          <span class="text-red-500">*</span>
        </label>
        <input
          formControlName="motDePasse"
          class="w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-600"
          id="motDePasse"
          placeholder="Entrez votre mot de passe"
          [type]="showPassword ? 'text' : 'password'"
        />
        <button
          type="button"
          class="absolute right-3 top-10 text-gray-600"
          (click)="togglePasswordVisibility()"
        >
          <i class="fas" [ngClass]="{'fa-eye': !showPassword, 'fa-eye-slash': showPassword}"></i>
        </button>
        <div *ngIf="motDePasse?.invalid && (motDePasse?.dirty || motDePasse?.touched)" class="text-red-500 text-sm mt-1">
          <div *ngIf="motDePasse?.errors?.['required']">Le mot de passe est requis.</div>
          <div *ngIf="motDePasse?.errors?.['minlength']">Le mot de passe doit comporter au moins 6 caractères.</div>
        </div>
      </div>
      <div class="text-red-500 text-sm mt-1">
        <div *ngIf="errorMessage != ''">{{ errorMessage }}</div>
      </div>
      <button
        class="w-full bg-green-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-green-600 focus:outline-none focus:ring-2 focus:ring-green-600"
        type="submit"
        [disabled]="loginForm.invalid"
      >
        CONNEXION
      </button>
    </form>

    <div class="flex items-center justify-center mt-6">
      <a href="#" class="text-blue-500 hover:underline" (click)="openForgotPasswordModal($event)">Mot de Passe Oublié ?</a>
    </div>
  </div>
</div>

<!-- Forgot Password Modal -->
<div *ngIf="showForgotPasswordModal" class="fixed inset-0 bg-gray-600 bg-opacity-50 flex items-center justify-center">
  <div class="bg-white p-8 rounded-lg w-full max-w-md">
    <h3 class="text-xl font-bold mb-4">Mot de Passe Oublié</h3>
    <form [formGroup]="forgotPasswordForm" (ngSubmit)="sendResetEmail()">
      <input
        formControlName="email"
        id="forgot-email"
        class="w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-600 mb-4"
        placeholder="Entrez votre email"
        type="email"
      />
      <div *ngIf="forgotPasswordForm.get('email')?.invalid && (forgotPasswordForm.get('email')?.dirty || forgotPasswordForm.get('email')?.touched)" class="text-red-500 text-sm mt-1">
        <div *ngIf="forgotPasswordForm.get('email')?.errors?.['required']">L'email est requis.</div>
        <div *ngIf="forgotPasswordForm.get('email')?.errors?.['email']">L'email n'est pas valide.</div>
      </div>
      <div class="flex justify-end">
        <button type="button" class="mr-2 text-gray-600 hover:text-gray-800" (click)="closeForgotPasswordModal()">Annuler</button>
        <button class="bg-blue-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-blue-600" type="submit" [disabled]="forgotPasswordForm.invalid">Envoyer</button>
      </div>
    </form>
  </div>
</div>

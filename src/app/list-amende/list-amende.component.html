<div class="flex h-screen">
    <!-- Sidebar -->
    <app-sidebar class="w-1/6 h-full"></app-sidebar>
  
    <!-- Main Content -->
    <div class="w-5/6 p-4 bg-gray-100 overflow-auto">
      <!-- Top Bar -->
      <app-top-bar></app-top-bar>
  
      <div class="container mx-auto">
        <!-- Search and Add Button -->
        <div class="flex justify-between items-center mb-4">
          <div class="flex space-x-4">
            <input type="text" class="pl-4 pr-4 py-2 rounded-full shadow-sm border border-gray-300 focus:outline-none focus:ring-2 focus:ring-blue-500" placeholder="Filtrer par plaque" [(ngModel)]="plaqueQuery" (ngModelChange)="filterAmendes()">
            <input type="date" class="pl-4 pr-4 py-2 rounded-full shadow-sm border border-gray-300 focus:outline-none focus:ring-2 focus:ring-blue-500" placeholder="Filtrer par date" [(ngModel)]="dateQuery" (ngModelChange)="filterAmendes()">
          </div>
        </div>
  
        <!-- Table -->
        <div class="bg-white shadow-md rounded-lg overflow-x-auto">
          <table class="min-w-full leading-normal">
            <thead>
              <tr>
                <th class="py-5 border-b-2 border-gray-200 bg-gray-100 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider">
                  #
                </th>
                <th class="py-5 border-b-2 border-gray-200 bg-gray-100 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider">Plaque</th>
                <th class="py-5 border-b-2 border-gray-200 bg-gray-100 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider">Date</th>
                <th class="py-5 border-b-2 border-gray-200 bg-gray-100 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider">Montant</th>
                <th class="py-5 border-b-2 border-gray-200 bg-gray-100 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider">Statut</th>
                <th class="py-5 border-b-2 border-gray-200 bg-gray-100 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider">Actions</th>
              </tr>
            </thead>
            <tbody>
              <tr *ngFor="let amende of filteredAmendes">
                <td class="py-5 border-b border-gray-200 bg-white text-sm">
                  <input type="hidden">
                </td>
                <td class="py-5 border-b border-gray-200 bg-white text-sm">{{ amende.plaque }}</td>
                <td class="py-5 border-b border-gray-200 bg-white text-sm">{{ amende.date | date : "dd MMMM yyyy, HH:mm:ss"}}</td>
                <td class="py-5 border-b border-gray-200 bg-white text-sm">{{ amende.montant }}</td>
                <td class="py-5 border-b border-gray-200 bg-white text-sm">
                  <span *ngIf="amende.status == true" class="text-green-700" >Payé</span>
                  <span *ngIf="amende.status == false" class="text-red-600">Non Payé</span>
                </td>
                <td *ngIf="amende.status == false" class="py-5 border-b border-gray-200 text-sm">
                  <button class="btn btn-success btn-sm" (click)="toggleStatus(amende)">Payer</button>
                </td>
                <td *ngIf="amende.status == true" class="py-5 border-b border-gray-200 text-sm">
                    <button class="btn btn-danger btn-sm" (click)="toggleStatus(amende)">Annuler</button>
                 </td>
              </tr>
            </tbody>
          </table>
        </div>
  
        <!-- Pagination -->
        <div class="flex justify-center mt-4">
          <nav class="relative z-0 inline-flex rounded-md shadow-sm -space-x-px" aria-label="Pagination">
            <button class="relative inline-flex items-center px-2 py-2 rounded-l-md border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50" (click)="prevPage()" [disabled]="currentPage === 1">
              <span class="sr-only">Previous</span>
              <i class="fas fa-chevron-left"></i>
            </button>
            <span class="relative inline-flex items-center px-4 py-2 border border-gray-300 bg-white text-sm font-medium text-gray-700">
              Page {{ currentPage }} sur {{ Math.ceil(amendes.length / itemsPerPage) }}
            </span>
            <button class="relative inline-flex items-center px-2 py-2 rounded-r-md border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50" (click)="nextPage()" [disabled]="(currentPage - 1) * itemsPerPage >= amendes.length">
              <span class="sr-only">Next</span>
              <i class="fas fa-chevron-right"></i>
            </button>
          </nav>
        </div>
      </div>
    </div>
  </div>
  